<!doctype html><html><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><title>ObsidianのメモをiCloudで同期しつつGitでバックアップする - Razl-Dazl</title><link rel=icon type=image/png href=/favicon.png><link rel=apple-touch-icon href=apple-touch-icon.png sizes=180x180>
<meta name=viewport content="width=device-width,initial-scale=1"><meta property="og:url" content="/posts/2025/git-icloud/"><meta property="og:site_name" content="Razl-Dazl"><meta property="og:title" content="ObsidianのメモをiCloudで同期しつつGitでバックアップする"><meta property="og:description" content="基本的にObsidianで取ったメモはiCloudで同期させていますが、Appleのエコシステムの外にバックアップを取りたかったので何とかしました"><meta property="og:locale" content="ja_jp"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-10-24T00:00:00+09:00"><meta property="article:modified_time" content="2025-10-24T00:00:00+09:00"><meta property="article:tag" content="Obsidian"><meta property="article:tag" content="Mac"><meta name=twitter:card content="summary"><meta name=twitter:title content="ObsidianのメモをiCloudで同期しつつGitでバックアップする"><meta name=twitter:description content="基本的にObsidianで取ったメモはiCloudで同期させていますが、Appleのエコシステムの外にバックアップを取りたかったので何とかしました"><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300&family=Raleway:wght@200;300&display=swap" rel=stylesheet><link rel=stylesheet type=text/css media=screen href=/css/normalize.css><link rel=stylesheet type=text/css media=screen href=/css/main.css><link href=https://social.vivaldi.net/@396 rel=me><script src=/js/main.js></script><script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js></script><script>MathJax={tex:{displayMath:[["\\[","\\]"],["$$","$$"]],inlineMath:[["\\(","\\)"],["$","$"]]}}</script></head><body class=single><div class="header wrapper"><h1 class=site-title><a href=/>Razl-Dazl</a></h1><div class=site-description><nav class="nav social"><ul class=flat></ul></nav></div><div class=menu-bar><nav class=nav><ul class=flat><li><a href=/>blog</a></li><li><a href=/diary/>diary</a></li><li><a href=/tags/%E6%95%B0%E5%AD%A6/>math</a></li></ul></nav><div class=toggle><input id=darkmode-toggle type=checkbox>
<label class=darkmode-toggle-label for=darkmode-toggle><span id=darkmode-svg><svg width="100%" height="100%" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2"><path d="M604.086 139.132C771.61 180.428 896 331.802 896 512c0 211.935-172.065 384-384 384-144.187.0-269.92-79.641-335.571-197.296C228.619 728.859 289.176 746.12 353.733 746.12c196.02.0 355.164-159.144 355.164-355.164.0-98.384-40.09-187.478-104.811-251.824z" style="fill:#ddd"/></svg></span></label></div></div></div><div class="container with-side-section wrapper post"><div class="main section"><div class=post-header><div class=eyecatch><img src=/thumbnails/obsidian.webp alt=eyecatch><div class=eyecatch-credit>© 2022 Obsidian</div></div><h1 class=title>ObsidianのメモをiCloudで同期しつつGitでバックアップする</h1><div class=meta>Posted at &mdash; 2025-10-24</div></div><div class=markdown><p>基本的にObsidianで取ったメモはiCloudで同期させていますが、Appleのエコシステムの外にバックアップを取りたかったので何とかしました</p><hr><h2 id=gitリポジトリはクラウドで同期させてはならない>Gitリポジトリはクラウドで同期させてはならない</h2><p>大前提として、GitリポジトリをiCloud等のクラウドの同期フォルダに突っ込むことは推奨されません</p><p>クラウドの同期フォルダは別端末からの変更・保存によって意図せぬ上書きが発生することがあります</p><p>Gitリポジトリをクラウドの同期フォルダに置いた場合、意図せぬ上書きや同期の競合によって内部データが破損し、コミットの履歴が読み込めなくなる恐れがあります</p><hr><h2 id=作業フォルダとgitリポジトリの実態を分ける>作業フォルダとGitリポジトリの実態を分ける</h2><p>上記の解決手段として、Gitリポジトリの実態のみをiCloudの管理下から分離するという手法を取ります</p><p>通常、Gitリポジトリの実態は作業フォルダ直下の<code>.git</code>フォルダ(隠しフォルダ)内にあります</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>Workspace/
</span></span><span style=display:flex><span>  ├ .git/ <span style=color:#586e75>#この中にコミット履歴等が保管されている</span>
</span></span><span style=display:flex><span>  ├ example.py
</span></span><span style=display:flex><span>  └ config.yml
</span></span></code></pre></div><p>まず、この<code>.git</code>フォルダを任意の場所(クラウドの管理下でない、ローカルの場所)に移動させます</p><p>隠しフォルダが表示されていない場合、Macでは<code>cmd + shift + .</code>で表示されるようになります</p><p>今回は<code>/Users/foobar/Documents/GitAlias/Workspace</code>の下へ移動させたと仮定します</p><p>その後、元々<code>.git</code>フォルダがあった場所へ<code>.git</code>という名称のテキストファイルを作成します</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>Workspace/
</span></span><span style=display:flex><span>  ├ .git <span style=color:#586e75>#テキストファイルを作成</span>
</span></span><span style=display:flex><span>  ├ example.py
</span></span><span style=display:flex><span>  └ config.yml
</span></span></code></pre></div><p>テキストファイルの中には<code>.git</code>フォルダのパス（絶対パス）を記述します</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>gitdir: /Users/foobar/Documents/GitAlias/Workspace/.git
</span></span></code></pre></div><p>これにより、Gitリポジトリの実態を分離させた後でも、各種GitクライアントからGitリポジトリとして認識されるようになります</p><p>あとはこの<code>Workspace</code>フォルダをiCloudの同期フォルダの中へ移動させるだけです</p><p>iCloudで同期されるものは作業中の各ファイルと<code>.git</code>という名称のテキストファイルのみになる為、Gitリポジトリの破損リスクは有りません</p><p>逆に言えば、ブランチの切替で作業フォルダの中身が変わってしまうと、それらもiCloudへ反映されてしまうのでブランチの頻繁な切替は推奨されません</p><p>この場合、あくまでもGitの使用目的はバックアップのみに絞るべきでしょう</p><p>変更履歴をガチガチに管理すべきソースコードたちは、このような方法でiCloud配下へ置くべきではありません</p><hr><h2 id=コミュニティプラグインによる自動バックアップ>コミュニティプラグインによる自動バックアップ</h2><p>さて、Gitでバックアップを取る準備はできましたので自動バックアップできるようにします</p><p>方針の概要は以下の通り</p><ul><li>Gitを扱えるコミュニティプラグインを導入し、自動バックアップする</li><li>自動バックアップは母艦のMacでのみ有効にする</li><li>iPhoneやiPadから作業する際はiCloudでのみ同期</li></ul><p>自動バックアップをMacでのみとしたのは以下の理由によります</p><ul><li>コミットの競合を避けるため</li><li>iOS系のアプリはサンドボックス内で動く為、<code>.git</code>ファイルによるGitリポジトリの実態のパス指定が難しい</li><li>そもそもiOS系だとObsidianの中でGitを呼び出すのが難しい(or安定して動くか分からない)</li></ul><p>コミュニティプラグインを導入して設定するだけなので、細かい導入法は省略します</p><p>Obsidianの設定を開いてコミュニティプラグインを検索し、ソースが以下のものと一致するプラグインをダウンロードします
<a href=https://github.com/Vinzent03/obsidian-git>https://github.com/Vinzent03/obsidian-git</a></p><p>後はコミュニティプラグインの設定を自分好みにするだけです</p><ul><li>「Split timers for automatic commit and sync」を有効化</li><li>「Auto commit interval (minutes)」と「Auto push interval (minutes)」の値を<code>5</code>に設定 (5分毎に自動コミット&プッシュ)</li><li>iPhoneやiPadでは「Disable on this device」を有効にするか、コミュニティプラグイン自体を無効化する</li></ul><hr><h2 id=osにインストールされたgitを使う>OSにインストールされたGitを使う</h2><p>私はKeybaseの暗号化Gitにバックアップを取っているので、更にコミュニティプラグインの設定を変更しています</p><ul><li>「Custom Git binary path」の値を<code>/usr/bin/git</code>に設定</li><li>「Additional environment variablesの値を以下に設定</li></ul><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>PATH=/Applications/Keybase.app/Contents/SharedSupport/bin:$PATH /usr/bin/git
</span></span></code></pre></div><hr><p>手順は以上です</p><p>iCloudというエコシステムの恩恵を最大限受けつつ、Appleの管轄外へ安全にバックアップを取れるようになりました</p><p>Obsidianは独自機能に関連するファイル(canvasなど)もテキストベースのファイルとなっていますから、本当にGitと相性が良いです</p></div><div class=post-tags><nav class="nav tags"><ul class=flat><li class=tag><img src=/img/tags/obsidian.webp alt="tag's icon">
<a href=/tags/obsidian>Obsidian</a></li><li class=tag><img src=/img/tags/mac.webp alt="tag's icon">
<a href=/tags/mac>Mac</a></li></ul></nav></div><div class="related section"><h2 class=section-header>関連記事</h2><ul><li><a href=/posts/2025/debian-install-gnome/>UTMでdebianを手動インストールしてGNOMEを導入するまでの手順</a></li><li><a href=/posts/2025/voicevox-server/>VOICEVOXサーバに他の端末からアクセスしたい</a></li><li><a href=/posts/2024/utm-waydroid/>Appleシリコン搭載MacでWaydroidを動かす</a></li><li><a href=/posts/2023/hugo-video-wikilink/>Hugoビルド時にWikiLink形式の動画リンクを変換する</a></li><li><a href=/posts/2022/obsidian-hugo-plugin/>ObsidianをHugoの為に最適化</a></li></ul></div></div><div class="side section"><div class="author section"><h2 class=section-header>Author@zakuro</h2><div class=content-wrapper><img src=/avatar.jpg><p>Mastodon: <a href=https://social.vivaldi.net/@396>396@vivaldi.net</a></p></div></div><div class="related section"><h2 class=section-header>Tags</h2><div class=tag-cloud><nav class="nav tags"><ul><li class=tag><img src=/img/tags/android.webp alt="tag's icon">
<a href=/tags/android/>Android (17)</a></li><li class=tag><img src=/img/tags/css.webp alt="tag's icon">
<a href=/tags/css/>CSS (1)</a></li><li class=tag><img src=/img/tags/gitbook.webp alt="tag's icon">
<a href=/tags/gitbook/>GitBook (2)</a></li><li class=tag><img src=/img/tags/hugo.webp alt="tag's icon">
<a href=/tags/hugo/>Hugo (15)</a></li><li class=tag><img src=/img/tags/tag.webp alt="tag's icon">
<a href=/tags/javascript/>JavaScript (1)</a></li><li class=tag><img src=/img/tags/kotlin.webp alt="tag's icon">
<a href=/tags/kotlin/>Kotlin (12)</a></li><li class=tag><img src=/img/tags/mac.webp alt="tag's icon">
<a href=/tags/mac/>Mac (11)</a></li><li class=tag><img src=/img/tags/obsidian.webp alt="tag's icon">
<a href=/tags/obsidian/>Obsidian (5)</a></li><li class=tag><img src=/img/tags/python.webp alt="tag's icon">
<a href=/tags/python/>Python (1)</a></li><li class=tag><img src=/img/tags/tag.webp alt="tag's icon">
<a href=/tags/rom%E7%84%BC%E3%81%8D/>ROM焼き (6)</a></li><li class=tag><img src=/img/tags/tag.webp alt="tag's icon">
<a href=/tags/%E3%81%9D%E3%81%AE%E4%BB%96/>その他 (8)</a></li><li class=tag><img src=/img/tags/%e6%95%b0%e5%ad%a6.webp alt="tag's icon">
<a href=/tags/%E6%95%B0%E5%AD%A6/>数学 (6)</a></li><li class=tag><img src=/img/tags/tag.webp alt="tag's icon">
<a href=/tags/%E9%9F%B3%E3%82%B2%E3%83%BC/>音ゲー (3)</a></li></ul></nav></div><h2 class=section-header>Archive</h2><a href=/all/>All posts</a></div></div></div><div class="footer wrapper"><nav class=nav><div>Razl-Dazl | <a href=https://github.com/vividvilla/ezhil>Ezhil theme</a> | Built with <a href=https://gohugo.io>Hugo</a></div></nav></div></body></html>